<style>
    * {
        box-sizing: border-box;
    }
    table {
        margin-inline: auto;
        border-spacing: 0;
    }
    table thead {
        position: sticky;
        top: 0;
        background-color: #ffffffbb;
    }
    table th,
    table td {
        padding: 1em;
    }
    table th {
        text-align: left;
        font-weight: 600;
        border-block-end: 2px solid lightgrey;
    }
    table td {
        border-block-end: 1px solid lightgrey;
    }
    tr.error {
        color: red;
    }
</style>

<div id="target"></div>
<table>
    <thead>
        <th>Input</th>
        <th>Expected</th>
        <th>Actual</th>
    </thead>
</table>

<script>

    // Act, Assert
    function aa(value, expected = value) {
        target.style.background = ''
        target.style.background = value
        const actual = target.style.background
        const result = actual === expected ? 'success' : 'error'
        console.log(`%c$Input: ${value}"`, `color: white; background-color: ${result === 'success' ? 'limegreen' : 'red'}`)
        console.log(`Actual: "${actual}"`)
        console.log(`Expected: "${expected}"`)
        let html = `<td>${value}</td>`
        html += `<td>${expected === '' ? '-' : expected}</td>`
        html += `<td>${actual === '' ? '-' : actual}</td>`
        const tr = document.createElement('tr')
        tr.innerHTML = html
        tr.classList.add(result)
        document.querySelector('table').appendChild(tr)
    }

    /**
     * background = [<bg-layer># ,]? <final-bg-layer>
     *
     * <bg-layer> = <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>
     * <final-bg-layer> =  <'background-color'> || <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>
     *
     * Issues:
     * - Chrome does not remove `<'background-color'>` when it has a default authored value
     * - Chrome removes `<bg-position>` when it has the default value (and another value is authored)
     * - Chrome does not add `center center` when no `<bg-position>` is authored
     * - Chrome does not add the 2nd `center` when `<bg-size>` has a default authored value
     * - Chrome does not remove `<repeat-style>`, `<attachment>`, `<box>`, when they have a default authored value
     * - Firefox serializes `<'background-color'>` first
     * - Firefox serializes `<bg-image>`, `<bg-position>`, `<repeat-style>`, `<attachment>`, `<'background-color'>`, with their default authored value
     * - Firefox serializes following the order <'background-color'> <bg-image> <repeat-style> <attachment> <bg-position> <box> <box>
     */
    aa('red', 'center center red')
    aa('red center', 'center center red')
    aa('rgb(0, 0, 0, 0)', 'center center')
    aa('center rgba(0, 0, 0, 0)', 'center center')
    aa('center', 'center center')
    aa('center center', 'center center')
    aa('center / auto', 'center center')
    aa('center / 100%', 'center center / 100%')
    aa('repeat', 'repeat')
    aa('red repeat', 'red')
    aa('no-repeat', 'no-repeat')
    aa('scroll', 'scroll')
    aa('red scroll', 'red')
    aa('border-box', 'border-box')
    aa('border-box border-box', 'border-box')
    aa('red border-box', 'red')
    aa('padding-box', 'padding-box')
    aa('center url("img.jpg")', 'url("img.jpg") center center')
    aa('no-repeat center url("img.jpg")', 'url("img.jpg") center center no-repeat')
    aa('fixed no-repeat center url("img.jpg")', 'url("img.jpg") center center no-repeat fixed')
    aa('padding-box fixed no-repeat center url("img.jpg")', 'url("img.jpg") center center no-repeat padding-box')
    aa('red padding-box no-repeat center url("img.jpg")', 'url("img.jpg") center center no-repeat padding-box red')
</script>
