<style>
    * {
        box-sizing: border-box;
    }
    table {
        margin-inline: auto;
        border-spacing: 0;
    }
    table thead {
        position: sticky;
        top: 0;
        background-color: #ffffffbb;
    }
    table th,
    table td {
        padding: 1em;
    }
    table th {
        text-align: left;
        font-weight: 600;
        border-block-end: 2px solid lightgrey;
    }
    table td {
        border-block-end: 1px solid lightgrey;
    }
    table td:nth-child(2) {
        white-space: nowrap;
    }
    tr.error {
        color: red;
    }
</style>

<div id="target"></div>
<table>
    <thead>
        <th>Operation...</th>
        <th>on</th>
        <th>Input</th>
        <th>Expected</th>
        <th>Actual</th>
    </thead>
</table>

<script>

    function getTypeFromProperty(property) {
        switch (property) {
            case 'border-width':
                return '&lt;length [0,&infin;]>'
            case 'opacity':
                return '&lt;number> | &lt;percentage>'
            case 'line-height':
                return '&lt;number>'
            case 'order':
                return '&lt;integer>'
            case 'width':
                return '&lt;dimension-percentage>'
        }
    }

    // Act, Assert
    function aa(title, property, value, expected) {
        target.style[property] = ''
        target.style[property] = value
        const actual = target.style[property]
        const result = actual === expected ? 'success' : 'error'
        console.log(`%c${title}`, `color: white; background-color: ${result === 'success' ? 'limegreen' : 'red'}`)
        console.log(`Input: "${property}: ${value}"`)
        console.log(`Actual: "${actual}"`)
        console.log(`Expected: "${expected}"`)
        let html = `<td><code>${title.replaceAll('<', '&lt;')}</code></td>`
        html += `<td><code>${getTypeFromProperty(property)}</code></td>`
        html += `<td>${value}</td>`
        html += `<td>${expected === '' ? '-' : expected}</td>`
        html += `<td>${actual === '' ? '-' : actual}</td>`
        const tr = document.createElement('tr')
        tr.innerHTML = html
        tr.classList.add(result)
        document.querySelector('table').appendChild(tr)
    }

    function calc() {

        aa('<number [0,&infin;]>', 'border-width', 'calc(-1)', 'calc(-1)') // '' in Chrome/Firefox
        aa('<integer>', 'order', 'calc(1.5)', 'calc(1.5)') // '' in Chrome / calc(2) in Firefox

        aa('<percentage>', 'width', 'calc(100%)', 'calc(100%)')
        aa('<percentage>', 'opacity', 'calc(100%)', 'calc(1)') // 1 in Chrome

        aa('<dimension-abs-unit> + <dimension-rel-unit>', 'width', 'calc(1px + 1em)', 'calc(1em + 1px)') // calc(1px + 1em) in Chrome
        aa('<dimension-abs-unit> * <dimension-abs-unit>', 'width', 'calc(1px * 1px)', '')
        aa('<dimension-abs-unit> / <dimension-abs-unit>', 'width', 'calc(1px / 1px)', '')
        aa('<dimension-abs-unit> * <dimension-rel-unit>', 'width', 'calc(1px * 1em)', '')
        aa('<dimension-abs-unit> / <dimension-rel-unit>', 'width', 'calc(1px / 1em)', '')

        aa('<dimension> + <percentage>', 'width', 'calc(100px + 50%)', 'calc(50% + 100px)') // calc(100px + 50%) in Chrome
        aa('<dimension> - <percentage>', 'width', 'calc(100px - 50%)', 'calc(-50% + 100px)') // calc(100px - 50%) in Chrome
        aa('<dimension> * <percentage>', 'width', 'calc(100px * 50%)', '')
        aa('<dimension> / <percentage>', 'width', 'calc(100px / 50%)', '')
        aa('<percentage> / <dimension>', 'width', 'calc(50% / 100px)', '')

        aa('<dimension> + <number>', 'width', 'calc(100px + 100)', '')
        aa('<percentage> + <number>', 'opacity', 'calc(50% + 0.5)', '')
        aa('<dimension> * <number>', 'width', 'calc(100px * 1)', 'calc(100px)')
        aa('<percentage> * <number>', 'width', 'calc(100% * 1)', 'calc(100%)')
        aa('<percentage> * <number>', 'opacity', 'calc(100% * 1)', 'calc(1)') // 1 in Chrome
        aa('<dimension> / <number>', 'width', 'calc(100px / 1)', 'calc(100px)')
        aa('<percentage> / <number>', 'width', 'calc(100% / 1)', 'calc(100%)')
        aa('<percentage> / <number>', 'opacity', 'calc(100% / 1)', 'calc(1)') // 1 in Chrome
        aa('<number> / <dimension>', 'width', 'calc(100 / 1px)', '')
        aa('<number> / <percentage>', 'width', 'calc(100 / 1%)', '')
        aa('<number> / <percentage>', 'opacity', 'calc(100 / 1%)', '')

        aa('<percentage> + <percentage>', 'width', 'calc(50% + 50%)', 'calc(100%)')
        aa('<percentage> + <percentage>', 'opacity', 'calc(150% - 50%)', 'calc(1)')  // 1 in Chrome
        aa('<percentage> * <percentage>', 'width', 'calc(100% * 1%)', '')
        aa('<percentage> * <percentage>', 'opacity', 'calc(100% * 100%)', '')
        aa('<percentage> / <percentage>', 'width', 'calc(100% / 100%)', '')
        aa('<percentage> / <percentage>', 'opacity', 'calc(100% / 100%)', '')

        aa('<nan-number>', 'opacity', 'calc(0 / 0)', 'calc(infinity)')
        aa('<nan-dimension>', 'width', 'calc(0px / 0)', 'calc(infinity * 1px)')
        aa('<infinite-number>', 'opacity', 'calc(1 / 0)', 'calc(infinity)')
        aa('<infinite-dimension>', 'width', 'calc(1px / 0)', 'calc(infinity * 1px)')

        aa('min(<dimension-abs-unit>)', 'width', 'calc(min(1px))', 'calc(1px)') // min(1px) in Chrome
        aa('min(<dimension-rel-unit>)', 'width', 'calc(min(1em))', 'calc(1em)') // min(1em) in Chrome
        aa('min(<percentage>)', 'width', 'calc(min(1%))', 'calc(1%)') // min(1%) in Chrome
        aa('min(<dimension-abs-unit>, <dimension-abs-unit>) + <dimension>', 'width', 'calc(min(1px, 2px) + 1px)', 'calc(2px)') // Input value in Chrome
        aa('min(<dimension-abs-unit>, <dimension-rel-unit>)', 'width', 'calc(min(1px, 1em))', 'min(1px, 1em)')
        aa('min(<dimension-abs-unit>, <dimension-rel-unit>) + <dimension>', 'width', 'calc(min(1px, 1em) + 1px)', 'calc(1px + min(1px, 1em))') // Input value in Chrome
        aa('min(<infinite-dimension>, <dimension-rel-unit>) + <dimension>', 'width', 'calc(min(0px / 0, 1em) + 1px)', 'calc(min(NaN * 1px, 1em) + 1px)')
    }
    calc()

    function min() {

        console.log('------ min() ------')

        aa('min(<percentage>)', 'width', 'min(1%)', 'calc(1%)') // min(1%) in Chrome
        aa('min(<percentage>)', 'opacity', 'min(100%)', 'calc(1)') // 1 in Chrome
        aa('min(<number>, <number>)', 'opacity', 'min(1, 2)', 'calc(1)') // 1 in Chrome
        aa('min(<dimension>, <dimension>)', 'width', 'min(1px, 2px)', 'calc(1px)') // min(1px, 2px) in Chrome
        aa('min(<number> + <number>, <number>)', 'opacity', 'min(1 + 1, 1)', 'calc(1)') // 1 in Chrome
        aa('min(<dimension> + <dimension>, <dimension>)', 'width', 'min(1px + 1px, 1px)', 'calc(1px)') // min(2px, 1px) in Chrome
        aa('min(<dimension>, <percentage>)', 'width', 'min(1px, 1%)', 'min(1px, 1%)')
        aa('min(<dimension-abs-unit>, <dimension-rel-unit>)', 'width', 'min(1px, 1em)', 'min(1px, 1em)')
        aa('min(<number>, <percentage>)', 'opacity', 'min(10%, 1)', '')
    }
    min()

    function clamp() {

        console.log('------ clamp() ------')

        aa('clamp(<dimension-abs-unit>, <dimension-abs-unit>, <dimension-abs-unit>)', 'width', 'clamp(1px, 2px, 3px)', 'calc(2px)') // Input value in Chrome
        aa('clamp(<dimension-abs-unit>, <dimension-rel-unit>, <dimension-abs-unit>)', 'width', 'clamp(1px, 1em, 3px)', 'clamp(1px, 1em, 3px)')
    }
    clamp()

    // `round()` is not implemented in Chrome/Firefox
    function round() {

        console.log('------ round() ------')

        aa('round(<dimension-abs-unit>, <dimension-abs-unit>)', 'width', 'round(nearest, 1px, 2px)', 'calc(2px)')
    }
    round()

    // Not implemented in Chrome/Firefox

    function mod() {

        console.log('------ mod() ------')

        aa('mod(<dimension-abs-unit>, <dimension-abs-unit>)', 'width', 'mod(5px, 2px)', 'calc(2px)')
    }
    mod()

    function rem() {

        console.log('------ rem() ------')

        aa('rem(<dimension-abs-unit>, <dimension-abs-unit>)', 'width', 'rem(5px, 2px)', 'calc(2px)')
    }
    rem()

    function sin() {

        console.log('------ sin() ------')

        aa('sin(<angle>)', 'line-height', 'sin(45deg)', `calc(40.514234)`)
    }
    sin()

    function cos() {

        console.log('------ cos() ------')

        aa('cos(<angle>)', 'line-height', 'cos(45deg)', `calc(40.514234)`)
    }
    cos()

    function tan() {

        console.log('------ tan() ------')

        aa('tan(<angle>)', 'line-height', 'tan(45deg)', `calc(57.295779)`)
    }
    tan()

    // asin()
    // acos()
    // atan()

    function pow() {

        console.log('------ pow() ------')

        aa('pow(<number>, <number>)', 'order', 'pow(1, 2)', `calc(2)`)
    }
    pow()

    // sqrt()
    // hypot()
    // log()
    // exp()
</script>
